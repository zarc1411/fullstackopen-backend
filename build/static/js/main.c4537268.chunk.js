(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),u=t.n(c),o=t(2),l=function(e){var n=e.searchItem,t=e.handleSearchItemChange;return r.a.createElement("div",null,"filter shown with"," ",r.a.createElement("input",{value:n,onChange:t}))},s=t(4),i=t(3),m=t.n(i),f="/api/persons",d=function(e){var n=e.persons,t=e.newName,a=e.newNumber,c=e.handleNameChange,u=e.handleNumberChange,o=e.setPersons,l=e.setNewName,i=e.setNewNumber,d=e.setMessage,h=e.setErrorMessage;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r=n.findIndex((function(e){return e.name===t})),c=n.find((function(e){return e.name===t}));if(-1!==r){if(window.confirm("".concat(t," is already added to phonebook, replace the old number with a new one?"))){var u=Object(s.a)(Object(s.a)({},c),{},{number:a});(function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))})(c.id,u).then((function(e){o(n.map((function(n){return n.id!==c.id?n:e}))),d("Added ".concat(e.name))})).catch((function(e){h("Information of ".concat(u.name," has already been removed from the server")),setTimeout((function(){h(null)}),5e3)}))}}else if(""!==t&&""!==a){(function(e){return m.a.post(f,e).then((function(e){return e.data}))})({name:t,number:a}).then((function(e){var t=n.concat(e);o(t),d("Added ".concat(e.name)),setTimeout((function(){d(null)}),5e3)})),l(""),i("")}}},r.a.createElement("div",null,"name : ",r.a.createElement("input",{value:t,onChange:c})),r.a.createElement("div",null,"number :"," ",r.a.createElement("input",{value:a,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.persons,t=e.searchItem,a=e.setPersons,c=""===t?n:n.filter((function(e){return e.name.toLowerCase().includes(t)})),u=function(e,t){window.confirm("Delete ".concat(e,"?"))&&function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))}(t).then((function(){a(n.filter((function(e){return e.id!==t})))}))};return r.a.createElement("div",null,c.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return u(e.name,e.id)}},"Delete"))})))},b=function(e){var n=e.message,t=e.errorMessage;return null===n&&null===t?null:n?r.a.createElement("div",{className:"message"},n):r.a.createElement("div",{className:"errorMessage"},t)},v=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1];Object(a.useEffect)((function(){m.a.get(f).then((function(e){return e.data})).then((function(e){return c(e)}))}),[]);var u=Object(a.useState)(""),s=Object(o.a)(u,2),i=s[0],v=s[1],E=Object(a.useState)(""),p=Object(o.a)(E,2),g=p[0],w=p[1],N=Object(a.useState)(""),j=Object(o.a)(N,2),O=j[0],C=j[1],I=Object(a.useState)(null),S=Object(o.a)(I,2),k=S[0],M=S[1],y=Object(a.useState)(null),P=Object(o.a)(y,2),D=P[0],x=P[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"PhoneBook"),r.a.createElement(b,{message:k,errorMessage:D}),r.a.createElement(l,{searchItem:O,handleSearchItemChange:function(e){var n=e.target.value;C(n.toLowerCase())}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(d,{persons:t,newName:i,handleNameChange:function(e){v(e.target.value)},newNumber:g,handleNumberChange:function(e){w(e.target.value)},setPersons:c,setNewName:v,setNewNumber:w,setMessage:M,setErrorMessage:x}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(h,{persons:t,searchItem:O,setPersons:c}))};t(37);u.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c4537268.chunk.js.map